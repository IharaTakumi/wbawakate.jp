extends /_layout/_default-layout

prepend config-block
  -
    let memberArr = _.values(members).reduce((p, c) => p.concat(c));
    let member = memberArr.filter(m => m.id === meta.id)[0]

append config-block
  - pageId = 'member-detail'
  - rootPath = '../../'
  - title = `${member.name} | ${settings.site_name}`
  - ogp_image_url = member.image ? `${settings.url}img/member/${member.image}` : settings.ogp_image_url
  - url = `${settings.url}member/${meta.id}/`

block content-block
  main.main
    .front-block
      .image
        img(src= `${member.image ? `${rootPath}img/member/${member.image}` : "//placehold.jp/300x300.png"}`)
      .profile.hover-effect
        h1.name
          = member.name
        if member.nameSub
          .sub-name
            = member.nameSub

        .body
          != body

          - const publicationArr = _.filter(bibArr, function(bib) { return bib.entryTags.authorKey.replace(/\s/g, '').split(',').indexOf(meta.id) !== -1; });
          if publicationArr.length > 0
            h2
              | Publications

            +publication-list(publicationArr, 'journal', '和文学会誌')
            +publication-list(publicationArr, 'international', '国際会議')
            +publication-list(publicationArr, 'domestic', '国内会議')

        .sns-list.no-hover-effect
          if meta.facebook
            .sns-item.facebook
              a.elm-a(href=`${meta.facebook}`, target="_blank")
                i.fa.fa-facebook
          if meta.twitter
            .sns-item.twitter
              a.elm-a(href=`${meta.twitter}`, target="_blank")
                i.fa.fa-twitter
